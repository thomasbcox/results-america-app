#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check for data.data patterns in API responses
echo "ğŸ” Checking for data.data patterns..."
if grep -r "data\.data" src/app/api/ --include="*.ts" --include="*.tsx"; then
  echo "âŒ Found data.data patterns in API files. Please fix these before committing."
  echo "ğŸ’¡ Use flattened response structure instead."
  exit 1
fi

# Check for data.data patterns in frontend code
echo "ğŸ” Checking for data.data patterns in frontend..."
if grep -r "data\.data" src/app/ --include="*.ts" --include="*.tsx" --exclude-dir=api; then
  echo "âŒ Found data.data patterns in frontend files. Please fix these before committing."
  echo "ğŸ’¡ Use flattened response structure instead."
  exit 1
fi

echo "âœ… No data.data patterns found!" 